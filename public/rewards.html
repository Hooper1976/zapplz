<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sponsors - Challenge Me</title>
    <style>
        body { background: #000; color: #d1fae5; font-family: 'Arial Black', sans-serif; margin: 0; padding-bottom: 110px; }
        header { display: flex; flex-direction: column; align-items: center; padding: 20px; background: #000; border-bottom: 2px solid #edff00; position: sticky; top: 0; z-index: 1000; }
        .logo-container { display: flex; align-items: center; gap: 10px; }
        .logo-icon { width: 35px; height: 35px; background: #edff00; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: black; font-weight: 900; }
        .logo-text { font-size: 18px; font-weight: 900; color: #edff00; text-transform: uppercase; font-style: italic; }
        
        .section-title { font-size: 14px; font-weight: 900; text-transform: uppercase; margin: 25px 20px 15px; color: #facc15; letter-spacing: 1px; }

        .reward-card { position: relative; margin: 0 20px 20px; height: 220px; border-radius: 25px; overflow: hidden; border: 1px solid rgba(237,255,0,0.3); box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        .reward-img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.7); }
        .reward-content { position: absolute; inset: 0; padding: 20px; display: flex; flex-direction: column; justify-content: flex-end; }
        .reward-title { font-size: 22px; font-weight: 900; color: white; text-transform: uppercase; font-style: italic; margin-bottom: 5px; text-shadow: 2px 2px 10px #000; }
        .reward-cost { background: #edff00; color: #000; padding: 5px 12px; border-radius: 8px; font-weight: 900; font-size: 14px; width: fit-content; }
        
        .progress-container { width: 100%; background: rgba(0,0,0,0.5); height: 10px; border-radius: 5px; margin-top: 15px; overflow: hidden; border: 1px solid rgba(237,255,0,0.2); }
        .progress-bar { background: #edff00; height: 100%; transition: width 0.5s; box-shadow: 0 0 15px #edff00; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: rgba(0,0,0,0.95); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #edff00; z-index: 1000; padding-bottom: 15px; }
        .nav-link { text-decoration: none; display: flex; flex-direction: column; align-items: center; color: #edff00; font-size: 9px; font-weight: 900; text-transform: uppercase; }
        .nav-icon { width: 32px; height: 32px; border-radius: 8px; background-size: cover; border: 1px solid rgba(237,255,0,0.4); margin-bottom: 5px; filter: grayscale(0.6); }
        .active .nav-icon { filter: grayscale(0); border-color: #edff00; }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo-icon">üéÅ</div>
            <div class="logo-text">LEGENDARY REWARDS</div>
        </div>
    </header>

    <div style="padding: 20px 20px 0;">
        <div style="background: rgba(237,255,0,0.1); border: 1px solid #edff00; padding: 15px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center;">
            <span style="font-weight: 900; font-size: 12px; color: #edff00;">DEIN KONTOSTAND:</span>
            <span id="userPoints" style="font-weight: 900; font-size: 20px; color: white;">0 XP</span>
        </div>
    </div>

    <div class="section-title">üî• Jetzt einl√∂sen</div>
    <div id="rewardList"></div>

    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-link">
            <div class="nav-icon" style="background-image: url('https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=100&q=80');"></div>
            <span>Home</span>
        </a>
        <a href="rewards.html" class="nav-link active">
            <div class="nav-icon" style="background-image: url('https://images.unsplash.com/photo-1513885535751-8b9238bd345a?auto=format&fit=crop&w=100&q=80');"></div>
            <span>Rewards</span>
        </a>
        <a href="create_challenge.html" class="nav-link">
            <div class="nav-icon" style="background-size: cover; border-radius: 50%; width: 50px; height: 50px; margin-top: -45px; border: 3px solid #edff00; background-image: url('https://images.unsplash.com/photo-1541571440-2051e0413009?auto=format&fit=crop&w=100&q=80');"></div>
            <span>Quest</span>
        </a>
        <a href="friends.html" class="nav-link">
            <div class="nav-icon" style="background-image: url('https://images.unsplash.com/photo-1511632765486-a01980e01a18?auto=format&fit=crop&w=100&q=80');"></div>
            <span>Freunde</span>
        </a>
        <a href="profile.html" class="nav-link">
            <div class="nav-icon" style="background-image: url('https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80');"></div>
            <span>Profil</span>
        </a>
    </nav>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        const sup = window.supabase.createClient("https://pfvvpqljjfmyvtyiuibh.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmdnZwcWxqamZteXZ0eWl1aWJoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3Nzc4OTAsImV4cCI6MjA4NzM1Mzg5MH0.cLodoc6oi8LiHdK_YVlzK7nnPQP7S5f8ewR79DP3Ve4");
        async function load() {
            const { data: { session } } = await sup.auth.getSession();
            const { data: prof } = await sup.from('profiles').select('total_points').eq('id', session.user.id).single();
            const points = prof?.total_points || 0;
            document.getElementById('userPoints').innerText = points + " XP";

            const { data: rewards } = await sup.from('rewards').select('*').eq('is_active', true);
            const list = document.getElementById('rewardList');
            list.innerHTML = rewards.map(r => {
                const prog = Math.min(100, (points / r.points_cost) * 100);
                return `
                <div class="reward-card">
                    <img src="${r.image_url}" class="reward-img">
                    <div class="reward-content">
                        <div class="reward-title">${r.title}</div>
                        <div class="reward-cost">${r.points_cost} XP</div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: ${prog}%"></div>
                        </div>
                    </div>
                </div>`;
            }).join('');
        }
        load();
    </script>
</body>
</html>
